<!doctype html>
<html>
    <header>
        <h1>DMIMG: Clasificador de documentos</h1>
    </header>
    
<body>
   <div id="load">
       <h2>Carga de datos</h2>
       <input  type ="file" id ="browseFile" />
       <p id= "valval"></p>
       <p id= "cantChar"></p>
       <p id= "linea"></p>



   </div>   
   
   <div id="process">
        <h2>Proceso de clasificacion</h2>
        <button type="button" onclick="classFunc()">Iniciar proceso de clasificacion</button>
        <p id= "procStatus"> En proceso.../Proceso Finalizado</p>
    </div>
   
   <div id="results">
        <h2>Resultados</h2>
       <p id= "resulttxt"></p>
       <pre id="contents"></pre>
   </div>

   <script>

       function cleanFunc(){
            document.getElementById("valval").innerHTML = "";
       }

       document
            .getElementById('browseFile')
            .addEventListener('change',
                function () {

                    document.getElementById("valval").innerHTML = "";
                    
                    if (browseFile.value.endsWith(".txt")){

                        var fr = new FileReader();
                        var alltext = ""
                        fr.onload = function () {
                            alltext = this.result;
                            document.getElementById('cantChar').innerHTML = alltext.indexOf("\n");
                            document.getElementById('linea').textContent = getoneline(alltext);
                            document.getElementById('contents').textContent = takeoneline(alltext,getoneline(alltext));    
                        };
                        fr.readAsText(this.files[0]);

                        
                    
                    }
                    else {
                        document.getElementById("valval").innerHTML = "Solo se adminten documentos.txt";
                    }

                }
            );
        function getoneline(s){
            line = "";
            pos = s.indexOf("\n");
            line = s.substr(0,160);
            s = s.replace(line,"");
            return line;
        }

        function takeoneline(s,l){
            s = s.replace(l,"");
            s = s.trim();
            return s;
        }

</script>

</body>
</html>
